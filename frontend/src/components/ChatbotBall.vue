<!-- src/components/ChatbotBall.vue -->
<script setup lang="ts">
import { SuspendedBallChat } from 'ai-suspended-ball-chat'

const chatbotApiUrl = 'http://localhost:8080/api/ai/chat'

const chatbotAppName = 'My AI Assistant'
const chatbotDomainName = 'user'
const chatbotStorageKey = 'my-chat-history'

const presetTasks = [
  {
    id: '1',
    icon: 'ğŸ’¡',
    title: 'åˆ›æ„å†™ä½œ',
    description: 'å¸®åŠ©æ‚¨è¿›è¡Œåˆ›æ„å†™ä½œå’Œå†…å®¹åˆ›ä½œ'
  },
  {
    id: '2',
    icon: 'ğŸ“Š',
    title: 'æ•°æ®åˆ†æ',
    description: 'ååŠ©æ‚¨è¿›è¡Œæ•°æ®åˆ†æå’Œå¯è§†åŒ–'
  },
  {
    id: '3',
    icon: 'ğŸ”§',
    title: 'æŠ€æœ¯æ”¯æŒ',
    description: 'æä¾›æŠ€æœ¯é—®é¢˜å’Œç¼–ç¨‹å¸®åŠ©'
  }
]


// è¿™é‡Œå¯ä»¥æ ¹æ®éœ€è¦åšä¸€äº›ç®€å•çš„å›è°ƒï¼Œä¾‹å¦‚åŸ‹ç‚¹ã€æ‰“å°æ—¥å¿—ç­‰
const callbacks = {
  // æ¯æ¬¡ç”¨æˆ·å‘é€æ¶ˆæ¯
  onUserMessage(message: any) {
    console.log('[Chatbot] ç”¨æˆ·æ¶ˆæ¯ï¼š', message)
  },

  // æ¯æ¬¡ AI å›å¤ä¸€æ¡ï¼ˆåœ¨æµå¼æ¨¡å¼ä¸‹å¯èƒ½ä¼šå¤šæ¬¡è§¦å‘ï¼‰
  onAssistantMessage(message: any) {
    console.log('[Chatbot] AI å›å¤ï¼š', message)
  },

  // è¯·æ±‚å‡ºé”™ï¼ˆç½‘ç»œé”™è¯¯ / åç«¯æŠ¥é”™ç­‰ï¼‰
  onError(error: unknown) {
    console.error('[Chatbot] å‡ºé”™ï¼š', error)
  }
}
</script>

<template>
  <!-- æ‚¬æµ®çƒ + å¼¹å‡ºèŠå¤©é¢æ¿ -->
  <SuspendedBallChat
      :url="chatbotApiUrl"
      :app-name="chatbotAppName"
      :domain-name="chatbotDomainName"
      :enable-streaming="true"
      :enable-context="true"
      :enable-local-storage="true"
      :enable-voice-input="true"
      :storage-key="chatbotStorageKey"
      :preset-tasks="presetTasks"
      :callbacks="callbacks"
      :show-theme-toggle="true"
      :enable-image-upload="false"
  />

</template>
